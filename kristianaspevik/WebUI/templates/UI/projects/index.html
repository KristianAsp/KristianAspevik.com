{% extends 'UI/base/base.html' %}

{% block content %}
<!-- Page Content -->
<main class="main">
    <div class="container">
        <div class="d-flex p-2">
            <div class="row filterRow">
                <div style="float: right;">
                    <select id="tags" class="filter" multiple="multiple">
                    {% for k in tags %}
                        <option>{{ k.name }}</option>
                    {% endfor %}
                    </select>
                    <button onclick="#"class="btn btn-default">Apply filters </button>
                    <script>
                    $(document).ready(function() {
                        $('#tags').multiselect({
                        buttonText: function(options, select) {
                          if (options.length === 0 || options.length === select[0].childElementCount) {
                              return select[0].id + ': all';
                          }
                          else if (options.length > 0) {
                              return select[0].id + ': ' + options.length + ' selected';
                          }
                           else {
                               var labels = [];
                               options.each(function() {
                                   if ($(this).attr('label') !== undefined) {
                                       labels.push($(this).attr('label'));
                                   }
                                   else {
                                       labels.push($(this).html());
                                   }
                               });
                               return select[0].id + ': ' + labels.join(', ') + '';
                           }
                        }
                        });
                    });
                    </script>
                </div>
            </div>
        </div>
        <div class="d-flex p-2">
            <div class="row">
                {% for project in projects %}
                <div class="col-md-4">
                    <div class="card">
                        <img class="card-img-top" src="https://source.unsplash.com/LAaSoL0LrYs/1920x1080" alt="Card image cap">
                        <div class="card-body">
                            <div class="row" style="margin:0">
                                <h5 style="margin-bottom:0.25rem" class="card-title"><a href="{% url 'project_detail' project.title %}">{{ project.title }}</a></h5>
                            </div>
                            <div style="margin-top:unset">
                                {% for tag in project.tags.all %}
                                    <a href="#" style="font-size:12px; display:inline; background-color: lightblue; padding: 3px 5px">{{tag.name}}</a>
                                {% endfor %}
                            </div>
                            <p style="margin-top: 1em;" class="card-text">{{ project.description }}</p>
                            <a href="{% url 'project_detail' project.title %}" class="btn btn-primary">
                                View  <i class="nested-icon fas fa-external-link-alt"></i>
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</main>
{% endblock %}
